{"version":3,"sources":["js/firebase_util.js"],"names":["db","firebase","firestore","chinese_sentence","loadData","docRef","collection","get","then","querySnapshot","forEach","doc","id","orderBy","onSnapshot","sentence","push","objToChinese","data","loadLeftFragment","uploadData","rightbody","document","getElementById","chinese","value","korean","pinyin","add","Date","console","log","catch","error","removeAllChilds","cell","hasChildNodes","removeChild","firstChild","leftBody","i","length","paragraph","createElement","className","textContent","appendChild","objToString","obj","str","p","hasOwnProperty"],"mappings":"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","file":"firebase_util.7f48b9b5.map","sourceRoot":"..","sourcesContent":["\nvar db = firebase.firestore();\nvar chinese_sentence = [];\n//데이터 불러오기\n(function loadData () {\n  var docRef = db.collection('conversation')\n    .get()\n    .then((querySnapshot) => {\n      querySnapshot.forEach((doc) => {\n        //console.log('doc id : ' + doc.data());\n        db.collection('conversation').doc(doc.id).collection('sentence')\n\t  .orderBy('timestamp', 'desc')\n          .onSnapshot((querySnapshot) => {\n\t    chinese_sentence = []\n            querySnapshot.forEach((sentence) => {\n              chinese_sentence.push(objToChinese(sentence.data()));\n            })\n\t    loadLeftFragment();\n          })\n      });\n    });}\n  )();\n\n\n//데이터 보내기\nfunction uploadData() {\n  var rightbody = document.getElementById(\"right\");\n  var chinese = document.getElementById(\"chinese\").value;\n  var korean = document.getElementById(\"korean\").value;\n  var pinyin = document.getElementById(\"pinyin\").value;\n  db.collection('conversation')\n    .doc('2ECYwxhjTSL86FQ1f4J7')\n    .collection('sentence')\n    .add({\n      'korean' : korean,\n      'chinese': chinese,\n      'pinyin': pinyin,\n      'audio': 'random',\n      'seq': 2,\n      'timestamp': new Date()\n    })\n    .then(function (docRef) {\n      console.log(\"Document written with ID: \", docRef.id);\n    })\n    .catch(function (error) {\n      console.error(\"Error adding document: \", error);\n    });\n}\n\nfunction removeAllChilds (cell) {\n\twhile ( cell.hasChildNodes() ) { cell.removeChild( cell.firstChild ); } \n}\n\nfunction loadLeftFragment(){\n  var leftBody = document.getElementById(\"left\");\n  removeAllChilds(leftBody);\n  for(var i=0; i<chinese_sentence.length; i++){\n     var paragraph = document.createElement('p');\n     paragraph.className += ' sentence';\n     paragraph.textContent = chinese_sentence[i];\n     leftBody.appendChild(paragraph);\n  }\n}\n\nfunction objToString(obj) {\n  var str = '';\n  for (var p in obj) {\n    if (obj.hasOwnProperty(p)) {\n      str += p + '::' + obj[p] + '\\n';\n    }\n  }\n  return str;\n}\n\n function objToChinese(obj){\n  var str = '';\n  for (var p in obj) {\n    if(obj.hasOwnProperty(p) && (p==\"chinese\" || p==\"korean\" || p==\"pinyin\")){\n      str += p + ' : ';\n      str += obj[p] + ' , ';\n    }\n  }\n  return str;\n}\n\nexport default {\n  uploadData\n}"]}