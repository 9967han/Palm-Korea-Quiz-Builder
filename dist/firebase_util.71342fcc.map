{"version":3,"sources":["js/firebase_util.js"],"names":["db","firebase","firestore","chinese_sentence","uploadData","document","getElementById","rightbody","chinese","value","korean","pinyin","collection","doc","add","Date","then","docRef","console","log","id","catch","error","removeAllChilds","cell","hasChildNodes","removeChild","firstChild","loadLeftFragment","leftBody","i","length","paragraph","createElement","className","textContent","appendChild","objToString","obj","str","p","hasOwnProperty","objToChinese","get","querySnapshot","forEach","orderBy","onSnapshot","sentence","push","data"],"mappings":";AAqFe,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EApFf,IAAIA,EAAKC,SAASC,YACdC,EAAmB,GAuBvB,SAASC,IACSC,SAASC,eAAe,SAApCC,IACAC,EAAUH,SAASC,eAAe,WAAWG,MAC7CC,EAASL,SAASC,eAAe,UAAUG,MAC3CE,EAASN,SAASC,eAAe,UAAUG,MAC/CT,EAAGY,WAAW,gBACXC,IAAI,wBACJD,WAAW,YACXE,IAAI,CACQJ,OAAAA,EACAF,QAAAA,EACDG,OAAAA,EACD,MAAA,SACF,IAAA,EACM,UAAA,IAAII,OAElBC,KAAK,SAAUC,GACdC,QAAQC,IAAI,6BAA8BF,EAAOG,MAElDC,MAAM,SAAUC,GACfJ,QAAQI,MAAM,0BAA2BA,KAI/C,SAASC,EAAiBC,GACjBA,KAAAA,EAAKC,iBAAoBD,EAAKE,YAAaF,EAAKG,YAGzD,SAASC,IACHC,IAAAA,EAAWxB,SAASC,eAAe,QACvCiB,EAAgBM,GACZ,IAAA,IAAIC,EAAE,EAAGA,EAAE3B,EAAiB4B,OAAQD,IAAI,CACrCE,IAAAA,EAAY3B,SAAS4B,cAAc,KACvCD,EAAUE,WAAa,YACvBF,EAAUG,YAAchC,EAAiB2B,GACzCD,EAASO,YAAYJ,IAI1B,SAASK,EAAYC,GACfC,IAAAA,EAAM,GACL,IAAA,IAAIC,KAAKF,EACRA,EAAIG,eAAeD,KACrBD,GAAOC,EAAI,KAAOF,EAAIE,GAAK,MAGxBD,OAAAA,EAGR,SAASG,EAAaJ,GACjBC,IAAAA,EAAM,GACL,IAAA,IAAIC,KAAKF,GACTA,EAAIG,eAAeD,IAAU,WAAHA,GAAmB,UAAHA,GAAkB,UAAHA,IAC1DD,GAAOC,EAAI,MACXD,GAAOD,EAAIE,GAAK,OAGbD,OAAAA,EA7EMvC,EAAGY,WAAW,gBACxB+B,MACA3B,KAAK,SAAC4B,GACLA,EAAcC,QAAQ,SAAChC,GAErBb,EAAGY,WAAW,gBAAgBC,IAAIA,EAAIO,IAAIR,WAAW,YACzDkC,QAAQ,YAAa,QACdC,WAAW,SAACH,GAClBzC,EAAmB,GACZyC,EAAcC,QAAQ,SAACG,GACrB7C,EAAiB8C,KAAKP,EAAaM,EAASE,WAErDtB,UAoEU,IAAA,EAAA,CACbxB,WAAAA,GADa,QAAA,QAAA","file":"firebase_util.71342fcc.map","sourceRoot":"../src","sourcesContent":["\nvar db = firebase.firestore();\nvar chinese_sentence = [];\n//데이터 불러오기\n(function loadData () {\n  var docRef = db.collection('conversation')\n    .get()\n    .then((querySnapshot) => {\n      querySnapshot.forEach((doc) => {\n        //console.log('doc id : ' + doc.data());\n        db.collection('conversation').doc(doc.id).collection('sentence')\n\t  .orderBy('timestamp', 'desc')\n          .onSnapshot((querySnapshot) => {\n\t    chinese_sentence = []\n            querySnapshot.forEach((sentence) => {\n              chinese_sentence.push(objToChinese(sentence.data()));\n            })\n\t    loadLeftFragment();\n          })\n      });\n    });}\n  )();\n\n\n//데이터 보내기\nfunction uploadData() {\n  var rightbody = document.getElementById(\"right\");\n  var chinese = document.getElementById(\"chinese\").value;\n  var korean = document.getElementById(\"korean\").value;\n  var pinyin = document.getElementById(\"pinyin\").value;\n  db.collection('conversation')\n    .doc('2ECYwxhjTSL86FQ1f4J7')\n    .collection('sentence')\n    .add({\n      'korean' : korean,\n      'chinese': chinese,\n      'pinyin': pinyin,\n      'audio': 'random',\n      'seq': 2,\n      'timestamp': new Date()\n    })\n    .then(function (docRef) {\n      console.log(\"Document written with ID: \", docRef.id);\n    })\n    .catch(function (error) {\n      console.error(\"Error adding document: \", error);\n    });\n}\n\nfunction removeAllChilds (cell) {\n\twhile ( cell.hasChildNodes() ) { cell.removeChild( cell.firstChild ); } \n}\n\nfunction loadLeftFragment(){\n  var leftBody = document.getElementById(\"left\");\n  removeAllChilds(leftBody);\n  for(var i=0; i<chinese_sentence.length; i++){\n     var paragraph = document.createElement('p');\n     paragraph.className += ' sentence';\n     paragraph.textContent = chinese_sentence[i];\n     leftBody.appendChild(paragraph);\n  }\n}\n\nfunction objToString(obj) {\n  var str = '';\n  for (var p in obj) {\n    if (obj.hasOwnProperty(p)) {\n      str += p + '::' + obj[p] + '\\n';\n    }\n  }\n  return str;\n}\n\n function objToChinese(obj){\n  var str = '';\n  for (var p in obj) {\n    if(obj.hasOwnProperty(p) && (p==\"chinese\" || p==\"korean\" || p==\"pinyin\")){\n      str += p + ' : ';\n      str += obj[p] + ' , ';\n    }\n  }\n  return str;\n}\n\nexport default {\n  uploadData\n}"]}